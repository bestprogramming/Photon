using System.Numerics;
using System.Globalization;

namespace Photon
{
    public partial struct Big
    {
        private static readonly BigInteger pow = BigInteger.Pow(10, Digits);
        private static readonly long floatFactor = 1000000000000000000L;
        private static readonly BigInteger powFloat = BigInteger.Pow(10, Digits - 18);
        private static readonly BigInteger pow2 = BigInteger.Pow(10, 2 * Digits);
        private static readonly BigInteger Epsilon = BigInteger.Pow(10, Digits / 8);

        public static readonly Big NaN = new(double.NaN);
        public static readonly Big Zero = new(0);
        public static readonly Big One = new(1);
        public static readonly Big MinusOne = new(-1);

        public const string PiString = "3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989";
        public const string Pi2String = "6.2831853071795864769252867665590057683943387987502116419498891846156328125724179972560696506842341359642961730265646132941876892191011644634507188162569622349005682054038770422111192892458979098607639288576219513318668922569512964675735663305424038182912971338469206972209086532964267872145204982825474491740132126311763497630418419256585081834307287357851807200226610610976409330427682939038830232188661145407315191839061843722347638652235862102370961489247599254991347037715054497824558763660238982596673467248813132861720427898927904494743814043597218874055410784343525863535047693496369353388102640011362542905271216555715426855155792183472743574429368818024499068602930991707421015845593785178470840399122242580439217280688363196272595495426199210374144226999999967459560999021194634656321926371900489189106938166052850446165066893700705238623763420200062756775057731750664167628412343553382946071965069808575109374623191257277647075751875039155637155610643424536132260038557532223918184328403978";
        public const string Pi7Over4String = "5.4977871437821381673096259207391300473450464489064351867061530365386787110008657475990609443487048689687591513982440366324142280667135189055193789642248419555379971797283924119347293780901606711281684377504192074153835307248323844091268705392246033410048849921160556100682950716343734388127054359972290180272615610522793060426616116849511946605018876438120331300198284284604358164124222571658976453165078502231400792859179113257054183820706379339574591303091649348117428658000672685596488918202709109772089283842711491254005374411561916432900837288147566514798484436300585130593166731809323184214589810009942225042112314486250998498261318160538650627625697715771436685027564617743993388864894562031161985349231962257884315120602317796738521058497924309077376198624999971527115874143545305324281685575412928040468570895296244140394433531988117083795792992675054912178175515281831146674860800609210077812969436082503220702795292350117941191282890659261182511159312996469115727533737840695928411287353480";
        public const string Pi3Over2String = "4.7123889803846898576939650749192543262957540990626587314624168884617246094293134979420522380131756019732221297699234599706407669143258733475880391121927216761754261540529077816583394669344234323955729466432164634989001691927134723506801747479068028637184728503851905229156814899723200904108903737119105868805099094733822623222813814442438811375730465518388855400169957958232306997820762204279122674141495859055486393879296382791760728989176896576778221116935699441243510278286290873368419072745179236947505100436609849646290320924195928371057860532697914155541558088257644397651285770122277015041076980008521907178953412416786570141366844137604557680822026613518374301452198243780565761884195338883853130299341681935329412960516272397204446621569649407780608170249999975594670749265895975992241444778925366891830203624539637834623800170275528928967822565150047067581293298812998125721309257665037209553973802356431332030967393442958235306813906279366727866707982568402099195028918149167938638246302983";
        public const string Pi5Over4String = "3.9269908169872415480783042290993786052464617492188822762186807403847705078577612482850435316776463349776851081416028833088673057619382277896566992601606013968128551283774231513819495557786861936629774555360137195824168076605945602922334789565890023864320607086543254357630679083102667420090753114265921557337582578944852186019011512035365676146442054598657379500141631631860255831517301836899268895117913215879571994899413652326467274157647413813981850930779749534369591898571909061140349227287649364122920917030508208038575267436829940309214883777248261796284631740214703664709404808435230845867564150007101589315794510347322141784472370114670464734018355511265311917876831869817138134903496115736544275249451401612774510800430226997670372184641374506483840141874999979662225624388246646660201203982437805743191836353783031528853166808562940774139852137625039222984411082344165104767757714720864341294978168630359443359139494535798529422344921899472273222256652140335082662524098457639948865205252486";
        public const string Pi3Over4String = "2.3561944901923449288469825374596271631478770495313293657312084442308623047146567489710261190065878009866110648849617299853203834571629366737940195560963608380877130770264538908291697334672117161977864733216082317494500845963567361753400873739534014318592364251925952614578407449861600452054451868559552934402549547366911311611406907221219405687865232759194427700084978979116153498910381102139561337070747929527743196939648191395880364494588448288389110558467849720621755139143145436684209536372589618473752550218304924823145160462097964185528930266348957077770779044128822198825642885061138507520538490004260953589476706208393285070683422068802278840411013306759187150726099121890282880942097669441926565149670840967664706480258136198602223310784824703890304085124999987797335374632947987996120722389462683445915101812269818917311900085137764464483911282575023533790646649406499062860654628832518604776986901178215666015483696721479117653406953139683363933353991284201049597514459074583969319123151491";
        public const string PiOver2String = "1.5707963267948966192313216916397514420985846996875529104874722961539082031431044993140174126710585339910740432566411533235469223047752911158626797040642405587251420513509692605527798223114744774651909822144054878329667230642378241168933915826356009545728242834617301743052271633241066968036301245706368622935033031577940874407604604814146270458576821839462951800056652652744102332606920734759707558047165286351828797959765460930586909663058965525592740372311899813747836759428763624456139690915059745649168366812203283215430106974731976123685953510899304718513852696085881465883761923374092338347025660002840635726317804138928856713788948045868185893607342204506124767150732747926855253961398446294617710099780560645109804320172090799068148873856549802593536056749999991864890249755298658664080481592975122297276734541513212611541266723425176309655940855050015689193764432937666041907103085888345736517991267452143777343655797814319411768937968759788909288902660856134033065009639383055979546082100994";
        public const string PiOver4String = "0.7853981633974483096156608458198757210492923498437764552437361480769541015715522496570087063355292669955370216283205766617734611523876455579313398520321202793625710256754846302763899111557372387325954911072027439164833615321189120584466957913178004772864121417308650871526135816620533484018150622853184311467516515788970437203802302407073135229288410919731475900028326326372051166303460367379853779023582643175914398979882730465293454831529482762796370186155949906873918379714381812228069845457529872824584183406101641607715053487365988061842976755449652359256926348042940732941880961687046169173512830001420317863158902069464428356894474022934092946803671102253062383575366373963427626980699223147308855049890280322554902160086045399534074436928274901296768028374999995932445124877649329332040240796487561148638367270756606305770633361712588154827970427525007844596882216468833020953551542944172868258995633726071888671827898907159705884468984379894454644451330428067016532504819691527989773041050497";
        public const string PiOver180String = "0.0174532925199432957692369076848861271344287188854172545609719144017100911460344944368224156963450948221230449250737905924838546922752810123984742189340471173191682450150107695616975535812386053051687886912711720870329635896026424901877043509181733439396980475940192241589469684813789632978181124952292984699278144795310454160084495609046069671761964687105143908889518362808267803695632452608441195089412947626131431088441838454784298996256210728062141559692354442374975963993652929160623774343500663840546315186802258702393667855274799734707621705676658941316820585512065349620930688037489914870522507333364895952514642268210320630153210533842979843262303802272290275190563697199187280599571093847717974556664228451612331159113023231100757209709517220028817067297222222131832113886169985096267560906588612469969741494905702362350458519149168625662843787278333507657708493699307400465634478732092730405755458527246041970485064420159104575210421875108765658765585120623711478500107104256177550512023344";
        public const string Pi180OverPiString = "57.2957795130823208767981548141051703324054724665643215491602438612028471483215526324409689958511109441862233816328648932814482646012483150360682678634119421225263880974672679263079887028931107679382614426382631582096104604870205064442596568411201719120577385662804312849626242033761879372976238707903403159807196240895220451862054599233963148419069662201151266096918015147876373669231641071267740385146901654995941925157119864794352106616243890352023067561777967571133156835062057313133601565013488980187887099177764391811593169200139029797682608293230553397026181660490929593282083154995798031955967007118252058466439231799858456719168439917754131652959953056406279044967248722534340724738330651858790088201071935485520604850068426473490756058743885675329321782466021242331327342721294453089166761671467202323137495784487981772906726908497801351886627439550559185806930334380673689717269463983388546519913267567748257649341692338111382433230532082241985164541395979472567140094041784696151560535821586";
        public static readonly Big Pi = Parse(PiString[..(Digits + 2)]);
        public static readonly Big Pi2 = Parse(Pi2String[..(Digits + 2)]);
        public static readonly Big Pi7Over4 = Parse(Pi7Over4String[..(Digits + 2)]);
        public static readonly Big Pi3Over2 = Parse(Pi3Over2String[..(Digits + 2)]);
        public static readonly Big Pi5Over4 = Parse(Pi5Over4String[..(Digits + 2)]);
        public static readonly Big Pi3Over4 = Parse(Pi3Over4String[..(Digits + 2)]);
        public static readonly Big PiOver2  = Parse(PiOver2String[..(Digits + 2)]);
        public static readonly Big PiOver4  = Parse(PiOver4String[..(Digits + 2)]);
        public static readonly Big PiOver180 = Parse(PiOver180String[..(Digits + 2)]);
        public static readonly Big Pi180OverPi = Parse(Pi180OverPiString[..(Digits + 2)]);

        public static readonly string Format = "0." + new string('#', Digits);

        public const string Sqrt2String = "1.4142135623730950488016887242096980785696718753769480731766797379907324784621070388503875343276415727350138462309122970249248360558507372126441214970999358314132226659275055927557999505011527820605714701095599716059702745345968620147285174186408891986095523292304843087143214508397626036279952514079896872533965463318088296406206152583523950547457502877599617298355752203375318570113543746034084988471603868999706990048150305440277903164542478230684929369186215805784631115966687130130156185689872372352885092648612494977154218334204285686060146824720771435854874155657069677653720226485447015858801620758474922657226002085584466521458398893944370926591800311388246468157082630100594858704003186480342194897278290641045072636881313739855256117322040245091227700226941127573627280495738108967504018369868368450725799364729060762996941380475654823728997180326802474420629269124859052181004459842150591120249441341728531478105803603371077309182869314710171111683916581726889419758716582152128229518488472";
        public static readonly Big Sqrt2 = Parse(Sqrt2String[..(Digits + 2)]);
        public const string Sqrt1Over2String = "0.7071067811865475244008443621048490392848359376884740365883398689953662392310535194251937671638207863675069231154561485124624180279253686063220607485499679157066113329637527963778999752505763910302857350547799858029851372672984310073642587093204445993047761646152421543571607254198813018139976257039948436266982731659044148203103076291761975273728751438799808649177876101687659285056771873017042494235801934499853495024075152720138951582271239115342464684593107902892315557983343565065078092844936186176442546324306247488577109167102142843030073412360385717927437077828534838826860113242723507929400810379237461328613001042792233260729199446972185463295900155694123234078541315050297429352001593240171097448639145320522536318440656869927628058661020122545613850113470563786813640247869054483752009184934184225362899682364530381498470690237827411864498590163401237210314634562429526090502229921075295560124720670864265739052901801685538654591434657355085555841958290863444709879358291076064114759244236";
        public static readonly Big Sqrt1Over2 = Parse(Sqrt1Over2String[..(Digits + 2)]);
        public const string Sqrt3String = "1.7320508075688772935274463415058723669428052538103806280558069794519330169088000370811461867572485756756261414154067030299699450949989524788116555120943736485280932319023055820679748201010846749232650153123432669033228866506722546689218379712270471316603678615880190499865373798593894676503475065760507566183481296061009476021871903250831458295239598329977898245082887144638329173472241639845878553976679580638183536661108431737808943783161020883055249016700235207111442886959909563657970871684980728994932964842830207864086039887386975375823173178313959929830078387028770539133695633121037072640192491067682311992883756411414220167427521023729942708310598984594759876642888977961478379583902288548529035760338528080643819723446610596897228728652641538226646984200211954841552784411812865345070351916500166892944154808460712771439997629268346295774383618951101271486387469765459824517885509753790138806649619119622229571105552429237231921977382625616314688420328537166829386496119170497388363954959381";
        public static readonly Big Sqrt3 = Parse(Sqrt3String[..(Digits + 2)]);

        private const int DecimalScaleMask = 0x00FF0000;
        private const int DecimalSignMask = unchecked((int)0x80000000);
    }
}
